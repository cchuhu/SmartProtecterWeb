<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Visual Admin Dashboard - Data Visualization</title>
    <meta name="description" content="">
    <meta name="author" content="templatemo">

    <link href='http://fonts.useso.com/css?family=Open+Sans:400,300,400italic,700' rel='stylesheet' type='text/css'>
    <link href="css/font-awesome.min.css" rel="stylesheet">
    <link href="css/bootstrap.min.css" rel="stylesheet">
    <link href="css/templatemo-style.css" rel="stylesheet">
  <!--  <script src="js/bootstrap-filestyle.min.js"></script>-->
    <script src="js/jquery.js"></script>
    <script src="js/bootstrap.js"></script>
    <![endif]-->

</head>
<script src="js/jquery.js"></script>
<body>
<!-- Left column -->
<div class="templatemo-flex-row">
    <div class="templatemo-sidebar">
        <header class="templatemo-site-header">

            <h1>Smart Protecter</h1>
        </header>
        <div class="profile-photo-container">
            <img src="images/profile-photo.jpg" alt="Profile Photo" class="img-responsive">

            <div class="profile-photo-overlay"></div>
        </div>

        <p></p>

        <div class="mobile-menu-icon">
            <i class="fa fa-bars"></i>
        </div>
        <nav class="templatemo-left-nav">
            <ul>
                <li><a href="service.html"><i class="fa fa-home fa-fw"></i>报修单</a></li>
                <li><a href="#" class="active"><i class="fa fa-users fa-fw"></i>维修人员</a></li>
                <li><a href="user.html"><i class="fa fa-users fa-fw"></i>业主</a></li>
                <li><a href="advice.html"><i class="fa fa-database fa-fw"></i>反馈及评价</a></li>
                <li><a href="data.html"><i class="fa fa-bar-chart-o fa-fw"></i>数据分析</a></li>
                <li><a href="login.html"><i class="fa fa-eject fa-fw"></i>登出</a></li>
            </ul>
        </nav>
    </div>
    <!-- Main content -->
    <div class="templatemo-content col-1 light-gray-bg">
        <div class="templatemo-content-container">


            </button>
            <!-- Button trigger modal -->
            <button type="button" class="btn btn-primary btn-lg" data-toggle="modal" data-target="#myModal"
                    style="background:#00b7ee;-webkit-text-fill-color:#ffffff;margin-left:980px">
                添加新员工
            </button>

            <!-- Modal -->
            <div class="modal fade" id="myModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel">
                <div class="modal-dialog" role="document">
                    <div class="modal-content">
                        <div class="modal-header">
                            <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span
                                    aria-hidden="true">&times;</span></button>
                            <h4 class="modal-title" id="myModalLabel">添加新员工</h4>
                        </div>
                        <div class="modal-body">
                            <form id="tianjia">
                                <div class="form-group">
                                    <label for="account">账号</label>
                                    <input type="text" class="form-control" id="account" placeholder="请输入账号">
                                </div>
                                <div class="form-group">
                                    <label for="password">密码</label>
                                    <input type="password" class="form-control" id="password" placeholder="请输入密码">
                                </div>
                                <div class="form-group">
                                    <label for="nickname">昵称</label>
                                    <input type="text" class="form-control" id="nickname" placeholder="请输入昵称">
                                </div>
                                <div class="form-group">
                                    <label for="phone">电话号码</label>
                                    <input type="text" class="form-control" id="phone" placeholder="请输入联系电话">
                                </div>
                                <div class="form-group">
                                    <label for="major">主营业务</label>
                                    <input type="text" class="form-control" id="major" placeholder="请输入主营业务:1宿舍楼，2教学楼，3校园设施。">
                                </div>
                                <button type="submit" id="add" class="btn btn-default"
                                        >提交
                                </button>
                                -
                            </form>
                        </div>
                        <div class="modal-footer">


                        </div>
                    </div>
                </div>
            </div>
            <p></p>
            <script>

            </script>

            <div class="templatemo-content-widget no-padding" style="
                                margin-top: 5px;
                                margin-left: 5px;
                                margin-right: 5px;
                                margin-bottom: 5px;
                                                ">
                <div class="panel panel-default table-responsive">
                    <!--、table标签是表格-->
                    <table class="table table-striped table-bordered templatemo-user-table">

                        <!--、tr指的是每一行的意思，td指的是每一列的意思-->
                        <tr style="background-color:#00b7ee;">
                            <td><a href="" class="white-text templatemo-sort-by"># <span></span></a>
                            </td>
                            <td><a href="" class="white-text templatemo-sort-by">员工账号 <span
                                    ></span></a>
                            </td>
                            <td><a href="" class="white-text templatemo-sort-by">密码<span
                                    ></span></a></td>
                            <td><a href="" class="white-text templatemo-sort-by">昵称 <span
                                    ></span></a></td>
                            <td><a href="" class="white-text templatemo-sort-by">电话号<span
                                    ></span></a>
                            <td><a href="" class="white-text templatemo-sort-by">业务类型<span
                                    ></span></a>
                            </td>

                        </tr>


                        <tbody>
                        <!-- 请求全部报修单的ajax-->
                        <script>
                            var json;
                            $.ajax({
                                url: '../../web/all_managers.php',
                                type: 'get',
                                //data: {"types": 0},
                                async: true, //默认为true 异步

                                success: function (data) {
                                    json = eval("(" + data + ")");
                                    var table = document.getElementsByTagName('table')[0];
                                    for (var i = 0; i < json.length; i++) {
                                        var tr = table.insertRow(table.rows.length);
                                        var obj = json[i];
                                        for (var p in obj) {

                                            if (p == "image_path") {

                                                //do nothing
                                            } else {
                                                var td = tr.insertCell(tr.cells.length);
                                                td.innerText = obj[p];
                                                if (p == "types") {
                                                    if (obj[p] == 1) {
                                                        td.innerText = "宿舍维修";
                                                    }
                                                    if (obj[p] == 2) {
                                                        td.innerText = "教学楼";

                                                    } else {
                                                        td.innerText = "校园设施";
                                                    }
                                                }
                                            }
                                        }


                                    }
                                }
                            });

                        </script>


                        </tbody>
                    </table>
                </div>
            </div>

        </div>
    </div>
</div>
<script>
    $(document).ready(function () {
       // $('#myModal').modal('toggle');
        var acc = document.getElementById("account");
        var pass = document.getElementById("password");
        var nick=document.getElementById("nickname");
        var phonenumber=document.getElementById("phone");
        var majorin=document.getElementById("major");


        $('#add').click(function () {

            $.ajax({
                url: '../../web/add_manager.php',
                type: 'get',
                data: {"account":acc.value,"password":pass.value,"nickname":nick.value,"phonenumber_m":phonenumber.value,"types":majorin.value,"icon_m":2},
                async: true, //默认为true 异步
                success: function (data) {
                    alert("添加成功");
                }


            });
        });
    })


</script>
<!-- JS -->
<script type="text/javascript" src="js/jquery.js"></script>
<!-- jQuery -->
<script type="text/javascript" src="js/jquery-migrate-1.2.1.min.js"></script>

<script>

</script>
<script type="text/javascript" src="js/templatemo-script.js"></script>
<!-- Templatemo Script -->
</body>
</html>